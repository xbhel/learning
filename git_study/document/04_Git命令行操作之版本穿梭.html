<html>
<head>
  <title>04_Git命令行操作之版本穿梭</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307934 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="935"/>
<h1>04_Git命令行操作之版本穿梭</h1>

<div>
<span><div><div>Git命令行操作之版本穿梭</div><div><br/></div><div>      我们先看一下命令，混个脸熟就可以，后面会有具体演示</div><div><br/></div><ul><li><div><span style="font-weight: bold;">查看版本日志命令</span></div></li><ul><li><div><b>git log</b>  #最完整的形式</div></li></ul></ul><div>                        <img src="04_Git命令行操作之版本穿梭_files/Image.png" type="image/png" data-filename="Image.png"/></div><ul><ul><li><div><b>git log --pretty=oneline</b> #简化展示内容 </div></li></ul></ul><div>                        <img src="04_Git命令行操作之版本穿梭_files/Image [1].png" type="image/png" data-filename="Image.png"/></div><ul><ul><li><div><b>git log --oneline</b>  #更加简化，相当于  git log --pretty=oneline 的缩写  ，只显示一部分hash值     </div></li><ul><li><div>且只会显示当前版本及该版本之前提交的版本信息记录</div></li></ul></ul></ul><div>                        <img src="04_Git命令行操作之版本穿梭_files/Image [2].png" type="image/png" data-filename="Image.png"/></div><ul><ul><li><div><b>git reflog</b>   #展示HEAD指针的信息 对我们版本的前进后退移动指针非常有用</div></li></ul></ul><div>                        <img src="04_Git命令行操作之版本穿梭_files/Image [3].png" type="image/png" data-filename="Image.png"/></div><div>                        1)HEAD@{移动到这个版本HEAD指针需要移动的步数}</div><div><br/></div><ul><li><div><span style="font-weight: bold;">版本前进后退命令 </span></div></li><ul><li><div><span style="font-weight: bold;">git reset --hard </span> &lt;下述几种方式&gt;</div></li><ul><li><div>基于索引值操作 <span style="background-color: rgb(255, 250, 165); color: rgb(255, 0, 0); font-weight: bold;-evernote-highlight:true;">#常用 配合 git reflog 查看历史版本记录</span></div></li><ul><li><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); color: rgb(255, 0, 0); font-weight: bold;-evernote-highlight:true;">git reset --hard  [局部索引值]</span></span></div></li></ul><li><div>使用^符号        #只能后退,HEAD后面接几个^表示退后几个版本 ，<span style="background-color: rgb(255, 250, 165); color: rgb(255, 0, 0); font-weight: bold;-evernote-highlight:true;">配合</span><span style="font-weight: bold;">git log --oneline查看历史记录比较清晰</span></div></li><ul><li><div><span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: &quot;Lucida Console&quot;;"> <b>git reset --hard HEAD^</b> </span></div></li></ul><li><div>使用~符号         #只能后退 ,n是几就退后几个版本  ，<span style="background-color: rgb(255, 250, 165); color: rgb(255, 0, 0); font-weight: bold;-evernote-highlight:true;">配合</span><span style="font-weight: bold;">git log --oneline查看历史记录比较清晰</span></div></li><ul><li><div><span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: &quot;Lucida Console&quot;;"> <b>git reset --hard HEAD~n</b></span></div></li></ul></ul><li><div><img src="04_Git命令行操作之版本穿梭_files/Image [4].png" type="image/png" data-filename="Image.png"/></div></li><li><div>如图移动到 26dadb3索引的位置，三种方法操作方式为</div></li><ul><li><div>基于索引值操作<b> git reset --hard <span style="min-height: 9pt; font-size: 9pt; color: rgb(191, 191, 0); font-family: &quot;Lucida Console&quot;;">26dadb3</span></b></div></li><li><div><span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: &quot;Lucida Console&quot;;">使用^符号     <b>git reset --hard HEAD^^^^</b></span></div></li><li><div><span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: &quot;Lucida Console&quot;;">使用~符号 </span>        <span style="font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(1, 1, 1); font-family: &quot;Lucida Console&quot;; font-variant-caps: normal; font-variant-ligatures: normal;"><b>git reset --hard HEAD~4</b></span></div></li></ul></ul></ul><div><span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: &quot;Lucida Console&quot;;">    </span></div><ul><ul><li><div><span style="font-size: 12px; color: rgb(1, 1, 1); font-family: &quot;Lucida Console&quot;;">hard和soft以及mixed参数对比</span></div></li><ul><li><div><span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: &quot;Lucida Console&quot;;"><b>--soft</b> 参数</span></div></li><ul><li><div><span style="font-size: 12px; color: rgb(1, 1, 1); font-family: &quot;Lucida Console&quot;;">仅仅在本地库移动HEAD指针，</span></div></li><li><div>暂存区<span style="font-weight: bold;">不会</span>同步</div></li><li><div>工作区<span style="font-weight: bold;">不会</span>同步</div></li></ul><li><div><span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: &quot;Lucida Console&quot;;"><b>--mixed </b>参数</span></div></li><ul><li><div><span style="font-size: 12px; color: rgb(1, 1, 1); font-family: &quot;Lucida Console&quot;;">在本地库移动HEAD指针</span></div></li><li><div><span style="font-size: 12px; color: rgb(1, 1, 1); font-family: &quot;Lucida Console&quot;;">重置暂存区</span></div></li><li><div><span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: &quot;Lucida Console&quot;;">工作区<span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: &quot;Lucida Console&quot;; font-weight: bold;">不会</span></span><span style="font-size: 12px; color: rgb(1, 1, 1); font-family: &quot;Lucida Console&quot;;">同步</span></div></li></ul><li><div><span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: &quot;Lucida Console&quot;;"><b>--hard </b>参数</span></div></li><ul><li><div><span style="font-size: 12px; color: rgb(1, 1, 1); font-family: &quot;Lucida Console&quot;;">在本地库移动HEAD指针</span></div></li><li><div>重置暂存区</div></li><li><div>重置工作区</div></li></ul><li><div>实例</div></li><ul><li><div>如下日志记录</div></li></ul></ul></ul></ul><div>                                    <img src="04_Git命令行操作之版本穿梭_files/Image [5].png" type="image/png" data-filename="Image.png"/>  </div><ul><ul><ul><ul><li><div>使用<b>git reset --soft HEAD^</b></div></li><ul><li><div>此时本地库已经后移了一个版本，显得暂存区、工作区就更新了，图解</div></li></ul></ul></ul></ul></ul><div>                                            <img src="04_Git命令行操作之版本穿梭_files/Image [6].png" type="image/png" data-filename="Image.png" width="715"/></div><div>                                            <img src="04_Git命令行操作之版本穿梭_files/Image [7].png" type="image/png" data-filename="Image.png"/>    </div><ul><ul><ul><ul><li><div>使用 <b>git reset --mixed HEAD^</b></div></li><ul><li><div>此时本地库，暂存区都会移动，图解<img src="04_Git命令行操作之版本穿梭_files/Image [8].png" type="image/png" data-filename="Image.png" width="725"/></div></li></ul></ul></ul></ul></ul><div>                                                    <img src="04_Git命令行操作之版本穿梭_files/Image [9].png" type="image/png" data-filename="Image.png"/></div><ul><ul><ul><ul><ul><li><div> 此时提示暂存区中存在change not staged for commit (未提交的更改)，与暂存区不一致                         </div></li></ul></ul></ul></ul></ul><div>                                                    <img src="04_Git命令行操作之版本穿梭_files/Image [10].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div><br/></div><ul><li><div><span style="font-weight: bold;">删除文件找回</span></div></li><ul><li><div>准备</div></li><ul><li><div>创建aaa.txt</div></li><li><div>git add aaa.txt到暂存区</div></li><li><div>git commit -m “ <span style="min-height: 9pt; font-size: 9pt; color: rgb(1, 1, 1); font-family: &quot;Lucida Console&quot;;">commit add.txt one</span>” aaa.txt到本地库</div></li><li><div>rm -aaa.txt # 删除工作区中aaa.txt</div></li><li><div>使用git add &lt;filename&gt; 或者git rm &lt;filename&gt;提交到暂存区</div></li></ul></ul></ul><div>                                 <img src="04_Git命令行操作之版本穿梭_files/Image [11].png" type="image/png" data-filename="Image.png"/>    </div><ul><ul><ul><li><div><span style="min-height: 9pt; font-size: 9pt; color: rgb(1, 1, 1); font-family: &quot;Lucida Console&quot;;"> git commit -m &quot;delete aaa.txt &quot; aaa.txt</span>   提交到本地库    </div></li><li><div>git reflog 查看</div></li><ul><li><div>可见每一次操作纪律都不会被删除，所以我们可以通过移动HEAD指针找回文件</div></li></ul></ul></ul></ul><div>                                <img src="04_Git命令行操作之版本穿梭_files/Image [12].png" type="image/png" data-filename="Image.png"/></div><ul><ul><ul><li><div><span style="min-height: 9pt; font-size: 9pt;"><span style="color: rgb(1, 1, 1); font-family: &quot;Lucida Console&quot;; font-size: 9pt; font-weight: bold;">git reset --hard 8848bb1</span></span></div></li><ul><li><div>找回，通过移动HEAD指针</div></li></ul></ul></ul></ul><div>                                        <img src="04_Git命令行操作之版本穿梭_files/Image [13].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div><br/></div><ul><li><div><b>比较文件</b></div></li><ul><li><div><b>git diff &lt;filename&gt;</b> #工作区文件和暂存区文件比较</div></li><li><div>操作</div></li><ul><li><div>使用vim编辑器为aaa.txt 添加一行“ diff diff”</div></li><li><div>使用git diff命令查看aaa.txt</div></li><li><div>显示工作区文件和暂存区文件的区别</div></li></ul></ul></ul><div>                            <img src="04_Git命令行操作之版本穿梭_files/Image [14].png" type="image/png" data-filename="Image.png"/>    </div><ul><ul><li><div><b>git diff HEAD &lt;filename&gt;</b> #工作区文件和本地库当前版本文件作对比 ，当然HEAD也可以使用上述前进后退版本命令与指定版本比较</div></li><li><div>操作</div></li><ul><li><div>使用vim编辑器为aaa.txt添加一行 “diff db”</div></li><li><div>使用git add aaa.txt 更新到暂存区</div></li><li><div>使用git diff HEAD^ aaa.txt 对比工作区文件和本地库文件当前版本的前一个版本的区别</div></li><li><div>显示工作区文件和本地库文件当前版本的前一个版本的区别</div></li></ul></ul></ul><div>                            <img src="04_Git命令行操作之版本穿梭_files/Image [15].png" type="image/png" data-filename="Image.png"/></div><div>    </div><div><br/></div><div>                </div><div>                        </div><div>                            </div><div>                </div><div><br/></div></div><div><br/></div></span>
</div></body></html> 